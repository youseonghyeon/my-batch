2023-07-29 22:46:57.806  INFO >> Starting SettlementNewApplication using Java 17.0.2 with PID 65060 (/Users/yuseonghyeon/workspace/my-batch/build/classes/java/main started by yuseonghyeon in /Users/yuseonghyeon/workspace/my-batch)
2023-07-29 22:46:57.807  INFO >> The following 1 profile is active: "default"
2023-07-29 22:46:58.248  INFO >> Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-07-29 22:46:58.304  INFO >> Finished Spring Data repository scanning in 52 ms. Found 3 JPA repository interfaces.
2023-07-29 22:46:58.892  INFO >> Tomcat initialized with port(s): 8002 (http)
2023-07-29 22:46:58.896  INFO >> Initializing ProtocolHandler ["http-nio-8002"]
2023-07-29 22:46:58.897  INFO >> Starting service [Tomcat]
2023-07-29 22:46:58.897  INFO >> Starting Servlet engine: [Apache Tomcat/10.1.10]
2023-07-29 22:46:58.934  INFO >> Initializing Spring embedded WebApplicationContext
2023-07-29 22:46:58.934  INFO >> Root WebApplicationContext: initialization completed in 1103 ms
2023-07-29 22:46:58.982  INFO >> HikariPool-1 - Starting...
2023-07-29 22:47:00.187  ERROR>> HikariPool-1 - Exception during pool initialization.
java.sql.SQLException: Access denied for user 'epfzja'@'localhost' (using password: YES)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:829)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:449)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:242)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:100)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	at org.springframework.jdbc.support.JdbcUtils.extractDatabaseMetaData(JdbcUtils.java:336)
	at org.springframework.boot.jdbc.DatabaseDriver.fromDataSource(DatabaseDriver.java:327)
	at org.springframework.boot.jdbc.init.PlatformPlaceholderDatabaseDriverResolver.getDatabaseDriver(PlatformPlaceholderDatabaseDriverResolver.java:137)
	at org.springframework.boot.jdbc.init.PlatformPlaceholderDatabaseDriverResolver.determinePlatform(PlatformPlaceholderDatabaseDriverResolver.java:131)
	at org.springframework.boot.jdbc.init.PlatformPlaceholderDatabaseDriverResolver.lambda$resolveAll$0(PlatformPlaceholderDatabaseDriverResolver.java:96)
	at org.springframework.boot.jdbc.init.PlatformPlaceholderDatabaseDriverResolver.resolveAll(PlatformPlaceholderDatabaseDriverResolver.java:121)
	at org.springframework.boot.jdbc.init.PlatformPlaceholderDatabaseDriverResolver.resolveAll(PlatformPlaceholderDatabaseDriverResolver.java:96)
	at org.springframework.boot.autoconfigure.batch.BatchDataSourceScriptDatabaseInitializer.resolveSchemaLocations(BatchDataSourceScriptDatabaseInitializer.java:83)
	at org.springframework.boot.autoconfigure.batch.BatchDataSourceScriptDatabaseInitializer.getSettings(BatchDataSourceScriptDatabaseInitializer.java:72)
	at org.springframework.boot.autoconfigure.batch.BatchDataSourceScriptDatabaseInitializer.<init>(BatchDataSourceScriptDatabaseInitializer.java:47)
	at org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration$DataSourceInitializerConfiguration.batchDataSourceInitializer(BatchAutoConfiguration.java:174)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at com.example.settlementnew.SettlementNewApplication.main(SettlementNewApplication.java:10)
2023-07-29 22:47:00.193  WARN >> Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'batchDataSourceInitializer' defined in class path resource [org/springframework/boot/autoconfigure/batch/BatchAutoConfiguration$DataSourceInitializerConfiguration.class]: Failed to instantiate [org.springframework.boot.autoconfigure.batch.BatchDataSourceScriptDatabaseInitializer]: Factory method 'batchDataSourceInitializer' threw exception with message: Unable to detect database type
2023-07-29 22:47:00.196  INFO >> Stopping service [Tomcat]
2023-07-29 22:47:00.210  INFO >> 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2023-07-29 22:47:00.225  ERROR>> Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'batchDataSourceInitializer' defined in class path resource [org/springframework/boot/autoconfigure/batch/BatchAutoConfiguration$DataSourceInitializerConfiguration.class]: Failed to instantiate [org.springframework.boot.autoconfigure.batch.BatchDataSourceScriptDatabaseInitializer]: Factory method 'batchDataSourceInitializer' threw exception with message: Unable to detect database type
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:659)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at com.example.settlementnew.SettlementNewApplication.main(SettlementNewApplication.java:10)
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.batch.BatchDataSourceScriptDatabaseInitializer]: Factory method 'batchDataSourceInitializer' threw exception with message: Unable to detect database type
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)
	... 21 common frames omitted
Caused by: java.lang.IllegalStateException: Unable to detect database type
	at org.springframework.util.Assert.state(Assert.java:76)
	at org.springframework.boot.jdbc.init.PlatformPlaceholderDatabaseDriverResolver.determinePlatform(PlatformPlaceholderDatabaseDriverResolver.java:132)
	at org.springframework.boot.jdbc.init.PlatformPlaceholderDatabaseDriverResolver.lambda$resolveAll$0(PlatformPlaceholderDatabaseDriverResolver.java:96)
	at org.springframework.boot.jdbc.init.PlatformPlaceholderDatabaseDriverResolver.resolveAll(PlatformPlaceholderDatabaseDriverResolver.java:121)
	at org.springframework.boot.jdbc.init.PlatformPlaceholderDatabaseDriverResolver.resolveAll(PlatformPlaceholderDatabaseDriverResolver.java:96)
	at org.springframework.boot.autoconfigure.batch.BatchDataSourceScriptDatabaseInitializer.resolveSchemaLocations(BatchDataSourceScriptDatabaseInitializer.java:83)
	at org.springframework.boot.autoconfigure.batch.BatchDataSourceScriptDatabaseInitializer.getSettings(BatchDataSourceScriptDatabaseInitializer.java:72)
	at org.springframework.boot.autoconfigure.batch.BatchDataSourceScriptDatabaseInitializer.<init>(BatchDataSourceScriptDatabaseInitializer.java:47)
	at org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration$DataSourceInitializerConfiguration.batchDataSourceInitializer(BatchAutoConfiguration.java:174)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 22 common frames omitted
2023-07-29 22:48:28.985  INFO >> Starting SettlementNewApplication using Java 17.0.2 with PID 65712 (/Users/yuseonghyeon/workspace/my-batch/build/classes/java/main started by yuseonghyeon in /Users/yuseonghyeon/workspace/my-batch)
2023-07-29 22:48:28.986  INFO >> The following 1 profile is active: "default"
2023-07-29 22:48:29.348  INFO >> Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-07-29 22:48:29.372  INFO >> Finished Spring Data repository scanning in 20 ms. Found 3 JPA repository interfaces.
2023-07-29 22:48:29.643  INFO >> Tomcat initialized with port(s): 8002 (http)
2023-07-29 22:48:29.646  INFO >> Initializing ProtocolHandler ["http-nio-8002"]
2023-07-29 22:48:29.647  INFO >> Starting service [Tomcat]
2023-07-29 22:48:29.647  INFO >> Starting Servlet engine: [Apache Tomcat/10.1.10]
2023-07-29 22:48:29.688  INFO >> Initializing Spring embedded WebApplicationContext
2023-07-29 22:48:29.689  INFO >> Root WebApplicationContext: initialization completed in 686 ms
2023-07-29 22:48:29.734  INFO >> HikariPool-1 - Starting...
2023-07-29 22:48:29.873  INFO >> HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5fb7ab9c
2023-07-29 22:48:29.874  INFO >> HikariPool-1 - Start completed.
2023-07-29 22:48:29.920  INFO >> HHH000204: Processing PersistenceUnitInfo [name: default]
2023-07-29 22:48:29.939  INFO >> HHH000412: Hibernate ORM core version 6.2.5.Final
2023-07-29 22:48:29.940  INFO >> HHH000406: Using bytecode reflection optimizer
2023-07-29 22:48:29.988  INFO >> HHH000021: Bytecode provider name : bytebuddy
2023-07-29 22:48:30.054  INFO >> No LoadTimeWeaver setup: ignoring JPA class transformer
2023-07-29 22:48:30.201  INFO >> HHH000021: Bytecode provider name : bytebuddy
2023-07-29 22:48:30.470  INFO >> HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-07-29 22:48:30.471  INFO >> Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-07-29 22:48:30.754  INFO >> Hibernate is in classpath; If applicable, HQL parser will be used.
2023-07-29 22:48:30.919  WARN >> spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-07-29 22:48:31.089  WARN >> Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.springframework.amqp.rabbit.core.RabbitAdmin
2023-07-29 22:48:31.106  INFO >> Starting ProtocolHandler ["http-nio-8002"]
2023-07-29 22:48:31.112  INFO >> Tomcat started on port(s): 8002 (http) with context path ''
2023-07-29 22:48:31.113  INFO >> Attempting to connect to: [127.0.0.1:5672]
2023-07-29 22:48:31.136  INFO >> Created new connection: rabbitConnectionFactory#99f75e4:0/SimpleConnection@1f94e1 [delegate=amqp://admin@127.0.0.1:5672/, localPort=53831]
2023-07-29 22:48:31.159  INFO >> Started SettlementNewApplication in 2.317 seconds (process running for 2.588)
2023-07-29 22:48:33.761  INFO >> Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-07-29 22:48:33.762  INFO >> Initializing Servlet 'dispatcherServlet'
2023-07-29 22:48:33.763  INFO >> Completed initialization in 1 ms
2023-07-29 22:48:33.791  INFO >> Created new connection: SocketSession[id:7843f8e5-c510-bdf7-1c79-17fbd58c822b]
2023-07-29 22:48:34.190  ERROR>> Failed to send message to session: 7843f8e5-c510-bdf7-1c79-17fbd58c822b
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendResourceMessage(SocketSender.java:31)
	at com.example.settlementnew.application_runner.ResourceUsageScheduler.resourceUsage(ResourceUsageScheduler.java:33)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-07-29 22:48:58.045  INFO >> Message Listen : {"messageType":"batch","chunkSize":"5000","mockSize":100000,"targetDate":"2023-07-29"}
2023-07-29 22:48:58.087  ERROR>> Error occurred while processing message
org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [SELECT JOB_INSTANCE_ID, JOB_NAME
FROM BATCH_JOB_INSTANCE
WHERE JOB_NAME = ?
 and JOB_KEY = ?]
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:101)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1538)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:667)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:713)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:744)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:757)
	at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:815)
	at org.springframework.batch.core.repository.dao.JdbcJobInstanceDao.getJobInstance(JdbcJobInstanceDao.java:183)
	at org.springframework.batch.core.repository.support.SimpleJobRepository.getLastJobExecution(SimpleJobRepository.java:299)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy126.getLastJobExecution(Unknown Source)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:111)
	at org.springframework.batch.core.launch.support.TaskExecutorJobLauncher.run(TaskExecutorJobLauncher.java:59)
	at com.example.settlementnew.listener.BatchListener.startBatch(BatchListener.java:47)
	at com.example.settlementnew.listener.BatchListener.receiveMessage(BatchListener.java:35)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.amqp.rabbit.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:75)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:277)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:224)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:149)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1616)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1535)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1523)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1514)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListenerAndHandleException(AbstractMessageListenerContainer.java:1459)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.lambda$executeListener$8(AbstractMessageListenerContainer.java:1437)
	at io.micrometer.observation.Observation.lambda$observe$0(Observation.java:493)
	at io.micrometer.observation.Observation.observeWithContext(Observation.java:603)
	at io.micrometer.observation.Observation.observe(Observation.java:492)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1437)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.sql.SQLSyntaxErrorException: Table 'batch.batch_job_instance' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1009)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)
	at org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(JdbcTemplate.java:722)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:651)
	... 49 common frames omitted
2023-07-29 22:51:04.039  INFO >> Waiting for workers to finish.
2023-07-29 22:51:04.558  INFO >> Successfully waited for workers to finish.
2023-07-29 22:51:04.568  INFO >> Closed connection: SocketSession[id:7843f8e5-c510-bdf7-1c79-17fbd58c822b]
2023-07-29 22:51:04.573  INFO >> Shutdown ignored - container is already stopped
2023-07-29 22:51:04.578  INFO >> Closing JPA EntityManagerFactory for persistence unit 'default'
2023-07-29 22:51:04.582  INFO >> HikariPool-1 - Shutdown initiated...
2023-07-29 22:51:04.586  INFO >> HikariPool-1 - Shutdown completed.
2023-07-29 22:51:06.141  INFO >> Starting SettlementNewApplication using Java 17.0.2 with PID 66227 (/Users/yuseonghyeon/workspace/my-batch/build/classes/java/main started by yuseonghyeon in /Users/yuseonghyeon/workspace/my-batch)
2023-07-29 22:51:06.143  INFO >> The following 1 profile is active: "default"
2023-07-29 22:51:06.586  INFO >> Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-07-29 22:51:06.614  INFO >> Finished Spring Data repository scanning in 24 ms. Found 3 JPA repository interfaces.
2023-07-29 22:51:06.871  INFO >> Tomcat initialized with port(s): 8002 (http)
2023-07-29 22:51:06.874  INFO >> Initializing ProtocolHandler ["http-nio-8002"]
2023-07-29 22:51:06.875  INFO >> Starting service [Tomcat]
2023-07-29 22:51:06.875  INFO >> Starting Servlet engine: [Apache Tomcat/10.1.10]
2023-07-29 22:51:06.908  INFO >> Initializing Spring embedded WebApplicationContext
2023-07-29 22:51:06.908  INFO >> Root WebApplicationContext: initialization completed in 735 ms
2023-07-29 22:51:06.956  INFO >> HikariPool-1 - Starting...
2023-07-29 22:51:07.093  INFO >> HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@66a82a13
2023-07-29 22:51:07.094  INFO >> HikariPool-1 - Start completed.
2023-07-29 22:51:07.142  INFO >> HHH000204: Processing PersistenceUnitInfo [name: default]
2023-07-29 22:51:07.164  INFO >> HHH000412: Hibernate ORM core version 6.2.5.Final
2023-07-29 22:51:07.165  INFO >> HHH000406: Using bytecode reflection optimizer
2023-07-29 22:51:07.220  INFO >> HHH000021: Bytecode provider name : bytebuddy
2023-07-29 22:51:07.283  INFO >> No LoadTimeWeaver setup: ignoring JPA class transformer
2023-07-29 22:51:07.445  INFO >> HHH000021: Bytecode provider name : bytebuddy
2023-07-29 22:51:07.763  INFO >> HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-07-29 22:51:07.765  INFO >> Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-07-29 22:51:08.130  INFO >> Hibernate is in classpath; If applicable, HQL parser will be used.
2023-07-29 22:51:08.408  WARN >> spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-07-29 22:51:08.657  WARN >> Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.springframework.amqp.rabbit.core.RabbitAdmin
2023-07-29 22:51:08.679  INFO >> Starting ProtocolHandler ["http-nio-8002"]
2023-07-29 22:51:08.688  INFO >> Tomcat started on port(s): 8002 (http) with context path ''
2023-07-29 22:51:08.691  INFO >> Attempting to connect to: [127.0.0.1:5672]
2023-07-29 22:51:08.734  INFO >> Created new connection: rabbitConnectionFactory#1c15a6aa:0/SimpleConnection@199d1fb7 [delegate=amqp://admin@127.0.0.1:5672/, localPort=53898]
2023-07-29 22:51:08.772  INFO >> Started SettlementNewApplication in 2.858 seconds (process running for 3.283)
2023-07-29 22:51:08.930  INFO >> Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-07-29 22:51:08.931  INFO >> Initializing Servlet 'dispatcherServlet'
2023-07-29 22:51:08.932  INFO >> Completed initialization in 0 ms
2023-07-29 22:51:08.956  INFO >> Created new connection: SocketSession[id:c13f70ef-c9f6-36e0-0632-76e2f1a759a6]
2023-07-29 22:51:09.794  ERROR>> Failed to send message to session: c13f70ef-c9f6-36e0-0632-76e2f1a759a6
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:51:09.795  ERROR>> Failed to send message to session: c13f70ef-c9f6-36e0-0632-76e2f1a759a6
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:51:09.795  ERROR>> Failed to send message to session: c13f70ef-c9f6-36e0-0632-76e2f1a759a6
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:51:09.796  ERROR>> Failed to send message to session: c13f70ef-c9f6-36e0-0632-76e2f1a759a6
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:51:09.796  ERROR>> Failed to send message to session: c13f70ef-c9f6-36e0-0632-76e2f1a759a6
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:51:09.796  ERROR>> Failed to send message to session: c13f70ef-c9f6-36e0-0632-76e2f1a759a6
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:51:09.796  ERROR>> Failed to send message to session: c13f70ef-c9f6-36e0-0632-76e2f1a759a6
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:51:09.796  ERROR>> Failed to send message to session: c13f70ef-c9f6-36e0-0632-76e2f1a759a6
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:51:27.045  INFO >> Message Listen : {"messageType":"batch","chunkSize":"5000","mockSize":100000,"targetDate":"2023-07-29"}
2023-07-29 22:51:27.119  INFO >> Job: [SimpleJob: [name=dailyJob]] launched with the following parameters: [{'random':'{value=17f34829-5fd7-4e2e-b155-41f72dda1395, type=class java.lang.String, identifying=true}','chunkSize':'{value=5000, type=class java.lang.String, identifying=true}','mockSize':'{value=100000, type=class java.lang.String, identifying=true}','targetDate':'{value=2023-07-29, type=class java.lang.String, identifying=true}'}]
2023-07-29 22:51:27.159  INFO >> Executing step: [insertMockSettlementStep]
2023-07-29 22:51:27.167  INFO >> ==================== Step 1. Mock 데이터 삽입 시작 ====================
2023-07-29 22:51:27.167  INFO >> 데이터 100000개 삽입 [jdbcBatchInsert]
2023-07-29 22:51:27.321  ERROR>> Encountered an error executing step insertMockSettlementStep in job dailyJob
org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [insert into settlement (username, price, created_at) values (?, ?, ?)]
	at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:99)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.springframework.jdbc.core.JdbcTemplate.translateException(JdbcTemplate.java:1538)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:667)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:691)
	at org.springframework.jdbc.core.JdbcTemplate.batchUpdate(JdbcTemplate.java:1125)
	at com.example.settlementnew.service.SettlementService.insertSettlements(SettlementService.java:53)
	at com.example.settlementnew.service.SettlementService.insertMockData(SettlementService.java:40)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:756)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.example.settlementnew.service.SettlementService$$SpringCGLIB$$0.insertMockData(<generated>)
	at com.example.settlementnew.job.DailySettlementJob.lambda$insertMockSettlementStep$0(DailySettlementJob.java:90)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:389)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:313)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:256)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:82)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:362)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:206)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:139)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:241)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:227)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.doProceed(DelegatingIntroductionInterceptor.java:137)
	at org.springframework.aop.support.DelegatingIntroductionInterceptor.invoke(DelegatingIntroductionInterceptor.java:124)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy54.execute(Unknown Source)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:153)
	at org.springframework.batch.core.job.AbstractJob.handleStep(AbstractJob.java:417)
	at org.springframework.batch.core.job.SimpleJob.doExecute(SimpleJob.java:132)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:316)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:157)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:148)
	at org.springframework.batch.core.launch.support.TaskExecutorJobLauncher.run(TaskExecutorJobLauncher.java:59)
	at com.example.settlementnew.listener.BatchListener.startBatch(BatchListener.java:47)
	at com.example.settlementnew.listener.BatchListener.receiveMessage(BatchListener.java:35)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.amqp.rabbit.listener.adapter.KotlinAwareInvocableHandlerMethod.doInvoke(KotlinAwareInvocableHandlerMethod.java:45)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.amqp.rabbit.listener.adapter.HandlerAdapter.invoke(HandlerAdapter.java:75)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandler(MessagingMessageListenerAdapter.java:277)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.invokeHandlerAndProcessResult(MessagingMessageListenerAdapter.java:224)
	at org.springframework.amqp.rabbit.listener.adapter.MessagingMessageListenerAdapter.onMessage(MessagingMessageListenerAdapter.java:149)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:1616)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.actualInvokeListener(AbstractMessageListenerContainer.java:1535)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:1523)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:1514)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListenerAndHandleException(AbstractMessageListenerContainer.java:1459)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.lambda$executeListener$8(AbstractMessageListenerContainer.java:1437)
	at io.micrometer.observation.Observation.lambda$observe$0(Observation.java:493)
	at io.micrometer.observation.Observation.observeWithContext(Observation.java:603)
	at io.micrometer.observation.Observation.observe(Observation.java:492)
	at org.springframework.amqp.rabbit.listener.AbstractMessageListenerContainer.executeListener(AbstractMessageListenerContainer.java:1437)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.doReceiveAndExecute(SimpleMessageListenerContainer.java:1001)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer.receiveAndExecute(SimpleMessageListenerContainer.java:948)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.mainLoop(SimpleMessageListenerContainer.java:1326)
	at org.springframework.amqp.rabbit.listener.SimpleMessageListenerContainer$AsyncMessageProcessingConsumer.run(SimpleMessageListenerContainer.java:1232)
	at java.base/java.lang.Thread.run(Thread.java:833)
Caused by: java.sql.BatchUpdateException: Table 'batch.settlement' doesn't exist
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)
	at com.mysql.cj.util.Util.handleNewInstance(Util.java:192)
	at com.mysql.cj.util.Util.getInstance(Util.java:167)
	at com.mysql.cj.util.Util.getInstance(Util.java:174)
	at com.mysql.cj.jdbc.exceptions.SQLError.createBatchUpdateException(SQLError.java:224)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:853)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchInternal(ClientPreparedStatement.java:435)
	at com.mysql.cj.jdbc.StatementImpl.executeBatch(StatementImpl.java:795)
	at com.zaxxer.hikari.pool.ProxyStatement.executeBatch(ProxyStatement.java:127)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeBatch(HikariProxyPreparedStatement.java)
	at org.springframework.jdbc.core.JdbcTemplate.lambda$batchUpdate$5(JdbcTemplate.java:1141)
	at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:651)
	... 78 common frames omitted
Caused by: java.sql.SQLSyntaxErrorException: Table 'batch.settlement' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1098)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:832)
	... 84 common frames omitted
2023-07-29 22:51:27.322  INFO >> Step: [insertMockSettlementStep] executed in 162ms
2023-07-29 22:51:27.326  INFO >> Job: [SimpleJob: [name=dailyJob]] completed with the following parameters: [{'random':'{value=17f34829-5fd7-4e2e-b155-41f72dda1395, type=class java.lang.String, identifying=true}','chunkSize':'{value=5000, type=class java.lang.String, identifying=true}','mockSize':'{value=100000, type=class java.lang.String, identifying=true}','targetDate':'{value=2023-07-29, type=class java.lang.String, identifying=true}'}] and the following status: [FAILED] in 200ms
2023-07-29 22:51:27.881  ERROR>> Failed to send message to session: c13f70ef-c9f6-36e0-0632-76e2f1a759a6
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendResourceMessage(SocketSender.java:31)
	at com.example.settlementnew.application_runner.ResourceUsageScheduler.resourceUsage(ResourceUsageScheduler.java:33)
	at jdk.internal.reflect.GeneratedMethodAccessor26.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:833)
2023-07-29 22:51:58.654  INFO >> Waiting for workers to finish.
2023-07-29 22:51:59.449  INFO >> Successfully waited for workers to finish.
2023-07-29 22:51:59.459  INFO >> Closed connection: SocketSession[id:c13f70ef-c9f6-36e0-0632-76e2f1a759a6]
2023-07-29 22:51:59.465  INFO >> Shutdown ignored - container is already stopped
2023-07-29 22:51:59.470  INFO >> Closing JPA EntityManagerFactory for persistence unit 'default'
2023-07-29 22:51:59.473  INFO >> HikariPool-1 - Shutdown initiated...
2023-07-29 22:51:59.478  INFO >> HikariPool-1 - Shutdown completed.
2023-07-29 22:52:16.514  INFO >> Starting SettlementNewApplication using Java 17.0.2 with PID 66462 (/Users/yuseonghyeon/workspace/my-batch/build/classes/java/main started by yuseonghyeon in /Users/yuseonghyeon/workspace/my-batch)
2023-07-29 22:52:16.514  INFO >> The following 1 profile is active: "default"
2023-07-29 22:52:16.877  INFO >> Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-07-29 22:52:16.904  INFO >> Finished Spring Data repository scanning in 24 ms. Found 3 JPA repository interfaces.
2023-07-29 22:52:17.180  INFO >> Tomcat initialized with port(s): 8002 (http)
2023-07-29 22:52:17.186  INFO >> Initializing ProtocolHandler ["http-nio-8002"]
2023-07-29 22:52:17.187  INFO >> Starting service [Tomcat]
2023-07-29 22:52:17.187  INFO >> Starting Servlet engine: [Apache Tomcat/10.1.10]
2023-07-29 22:52:17.223  INFO >> Initializing Spring embedded WebApplicationContext
2023-07-29 22:52:17.224  INFO >> Root WebApplicationContext: initialization completed in 693 ms
2023-07-29 22:52:17.271  INFO >> HikariPool-1 - Starting...
2023-07-29 22:52:17.413  INFO >> HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@748904e8
2023-07-29 22:52:17.415  INFO >> HikariPool-1 - Start completed.
2023-07-29 22:52:17.461  INFO >> HHH000204: Processing PersistenceUnitInfo [name: default]
2023-07-29 22:52:17.481  INFO >> HHH000412: Hibernate ORM core version 6.2.5.Final
2023-07-29 22:52:17.483  INFO >> HHH000406: Using bytecode reflection optimizer
2023-07-29 22:52:17.534  INFO >> HHH000021: Bytecode provider name : bytebuddy
2023-07-29 22:52:17.593  INFO >> No LoadTimeWeaver setup: ignoring JPA class transformer
2023-07-29 22:52:17.747  INFO >> HHH000021: Bytecode provider name : bytebuddy
2023-07-29 22:52:18.039  INFO >> HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-07-29 22:52:18.052  WARN >> GenerationTarget encountered exception accepting command : Error executing DDL "alter table transfer_history drop foreign key FKdyl45hdc68sih8oy0gr7xcs9i" via JDBC [Table 'batch.transfer_history' doesn't exist]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "alter table transfer_history drop foreign key FKdyl45hdc68sih8oy0gr7xcs9i" via JDBC [Table 'batch.transfer_history' doesn't exist]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:92)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:235)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:219)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.applyConstraintDropping(SchemaDropperImpl.java:455)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropConstraintsTablesSequences(SchemaDropperImpl.java:242)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.dropFromMetadata(SchemaDropperImpl.java:215)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.performDrop(SchemaDropperImpl.java:185)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:155)
	at org.hibernate.tool.schema.internal.SchemaDropperImpl.doDrop(SchemaDropperImpl.java:115)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:242)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:143)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:140)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:292)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1455)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1816)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:931)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at com.example.settlementnew.SettlementNewApplication.main(SettlementNewApplication.java:10)
Caused by: java.sql.SQLSyntaxErrorException: Table 'batch.transfer_history' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:763)
	at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:648)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:78)
	... 40 common frames omitted
2023-07-29 22:52:18.125  INFO >> Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-07-29 22:52:18.430  INFO >> Hibernate is in classpath; If applicable, HQL parser will be used.
2023-07-29 22:52:18.593  WARN >> spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-07-29 22:52:18.756  WARN >> Using deprecated '-debug' fallback for parameter name resolution. Compile the affected code with '-parameters' instead or avoid its introspection: org.springframework.amqp.rabbit.core.RabbitAdmin
2023-07-29 22:52:18.773  INFO >> Starting ProtocolHandler ["http-nio-8002"]
2023-07-29 22:52:18.779  INFO >> Tomcat started on port(s): 8002 (http) with context path ''
2023-07-29 22:52:18.780  INFO >> Attempting to connect to: [127.0.0.1:5672]
2023-07-29 22:52:18.806  INFO >> Created new connection: rabbitConnectionFactory#2319c1e0:0/SimpleConnection@fed510f [delegate=amqp://admin@127.0.0.1:5672/, localPort=53945]
2023-07-29 22:52:18.827  INFO >> Started SettlementNewApplication in 2.452 seconds (process running for 2.715)
2023-07-29 22:52:19.045  INFO >> Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-07-29 22:52:19.045  INFO >> Initializing Servlet 'dispatcherServlet'
2023-07-29 22:52:19.046  INFO >> Completed initialization in 1 ms
2023-07-29 22:52:19.071  INFO >> Created new connection: SocketSession[id:c28ef592-141f-f743-e87f-c738e63e75bb]
2023-07-29 22:52:19.865  ERROR>> Failed to send message to session: c28ef592-141f-f743-e87f-c738e63e75bb
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:52:19.866  ERROR>> Failed to send message to session: c28ef592-141f-f743-e87f-c738e63e75bb
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:52:19.866  ERROR>> Failed to send message to session: c28ef592-141f-f743-e87f-c738e63e75bb
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:52:19.866  ERROR>> Failed to send message to session: c28ef592-141f-f743-e87f-c738e63e75bb
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:52:19.866  ERROR>> Failed to send message to session: c28ef592-141f-f743-e87f-c738e63e75bb
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:52:19.867  ERROR>> Failed to send message to session: c28ef592-141f-f743-e87f-c738e63e75bb
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:52:19.867  ERROR>> Failed to send message to session: c28ef592-141f-f743-e87f-c738e63e75bb
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:52:19.867  ERROR>> Failed to send message to session: c28ef592-141f-f743-e87f-c738e63e75bb
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:52:19.867  ERROR>> Failed to send message to session: c28ef592-141f-f743-e87f-c738e63e75bb
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:52:19.867  ERROR>> Failed to send message to session: c28ef592-141f-f743-e87f-c738e63e75bb
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:52:19.867  ERROR>> Failed to send message to session: c28ef592-141f-f743-e87f-c738e63e75bb
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:52:19.868  ERROR>> Failed to send message to session: c28ef592-141f-f743-e87f-c738e63e75bb
java.lang.IllegalStateException: The remote endpoint was in state [TEXT_PARTIAL_WRITING] which is an invalid state for called method
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.checkState(WsRemoteEndpointImplBase.java:1250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase$StateMachine.textPartialStart(WsRemoteEndpointImplBase.java:1210)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:222)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:215)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at com.example.settlementnew.socket.WasWebSocketHandler.lambda$sendMessage$0(WasWebSocketHandler.java:41)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at com.example.settlementnew.socket.WasWebSocketHandler.sendMessage(WasWebSocketHandler.java:39)
	at com.example.settlementnew.socket.SocketSender.send(SocketSender.java:25)
	at com.example.settlementnew.socket.SocketSender.sendLogMessage(SocketSender.java:21)
	at com.example.settlementnew.application_runner.LogSenderThread.run(LogSenderThread.java:24)
2023-07-29 22:52:24.417  INFO >> Message Listen : {"messageType":"batch","chunkSize":"5000","mockSize":100000,"targetDate":"2023-07-29"}
2023-07-29 22:52:24.469  INFO >> Job: [SimpleJob: [name=dailyJob]] launched with the following parameters: [{'random':'{value=1b0949b7-e63a-42bc-986a-6330fe9fd48f, type=class java.lang.String, identifying=true}','chunkSize':'{value=5000, type=class java.lang.String, identifying=true}','mockSize':'{value=100000, type=class java.lang.String, identifying=true}','targetDate':'{value=2023-07-29, type=class java.lang.String, identifying=true}'}]
2023-07-29 22:52:24.500  INFO >> Executing step: [insertMockSettlementStep]
2023-07-29 22:52:24.507  INFO >> ==================== Step 1. Mock 데이터 삽입 시작 ====================
2023-07-29 22:52:24.508  INFO >> 데이터 100000개 삽입 [jdbcBatchInsert]
2023-07-29 22:52:30.446  INFO >> Step: [insertMockSettlementStep] executed in 5s945ms
2023-07-29 22:52:30.451  INFO >> Executing step: [delayStep]
2023-07-29 22:52:31.466  INFO >> Step: [delayStep] executed in 1s15ms
2023-07-29 22:52:31.488  INFO >> Executing step: [dailySettlementStep]
2023-07-29 22:52:31.492  INFO >> ==================== Step 2. 데이터 정산 시작 ====================
2023-07-29 22:52:31.494  INFO >> 현재 날짜 : 2023-07-29, 정산 날짜 : 2023-07-29
2023-07-29 22:52:31.651  INFO >> Step: [dailySettlementStep] executed in 162ms
2023-07-29 22:52:31.660  INFO >> Duplicate step [delayStep] detected in execution of job=[dailyJob]. If either step fails, both will be executed again on restart.
2023-07-29 22:52:31.662  INFO >> Executing step: [delayStep]
2023-07-29 22:52:32.676  INFO >> Step: [delayStep] executed in 1s13ms
2023-07-29 22:52:32.681  INFO >> ==================== Step 3. 송금 시작 ====================
2023-07-29 22:52:32.705  INFO >> Executing step: [transferSettlementStep]
2023-07-29 22:52:32.883  ERROR>> 송금 중 치명적 에러 발생 to: user1137, amount: 149800
2023-07-29 22:52:32.884  WARN >> 송금 중 에러 발생 to: user1610, amount: 126200
2023-07-29 22:52:32.884  WARN >> 송금 중 에러 발생 to: user1638, amount: 134700
2023-07-29 22:52:32.886  WARN >> 송금 중 에러 발생 to: user2627, amount: 110800
2023-07-29 22:52:32.887  WARN >> 송금 중 에러 발생 to: user3034, amount: 118800
2023-07-29 22:52:32.887  WARN >> 송금 중 에러 발생 to: user3305, amount: 141300
2023-07-29 22:52:32.888  WARN >> 송금 중 에러 발생 to: user3808, amount: 114700
2023-07-29 22:52:34.354  WARN >> 송금 중 에러 발생 to: user5102, amount: 142500
2023-07-29 22:52:34.355  WARN >> 송금 중 에러 발생 to: user5822, amount: 122700
2023-07-29 22:52:34.358  WARN >> 송금 중 에러 발생 to: user7589, amount: 133000
2023-07-29 22:52:34.359  WARN >> 송금 중 에러 발생 to: user8099, amount: 124400
2023-07-29 22:52:34.359  WARN >> 송금 중 에러 발생 to: user8275, amount: 120800
2023-07-29 22:52:34.360  WARN >> 송금 중 에러 발생 to: user8776, amount: 121600
2023-07-29 22:52:34.361  WARN >> 송금 중 에러 발생 to: user9535, amount: 121900
2023-07-29 22:52:35.713  INFO >> Step: [transferSettlementStep] executed in 3s8ms
2023-07-29 22:52:35.715  INFO >> Duplicate step [delayStep] detected in execution of job=[dailyJob]. If either step fails, both will be executed again on restart.
2023-07-29 22:52:35.718  INFO >> Executing step: [delayStep]
2023-07-29 22:52:36.732  INFO >> Step: [delayStep] executed in 1s13ms
2023-07-29 22:52:36.737  INFO >> ==================== Step 4. 실패한 결과 재송금 시작 ====================
2023-07-29 22:52:36.753  INFO >> Executing step: [retryTransferSettlementStep]
2023-07-29 22:52:36.829  INFO >> Step: [retryTransferSettlementStep] executed in 75ms
2023-07-29 22:52:36.836  INFO >> Duplicate step [delayStep] detected in execution of job=[dailyJob]. If either step fails, both will be executed again on restart.
2023-07-29 22:52:36.841  INFO >> Executing step: [delayStep]
2023-07-29 22:52:37.858  INFO >> Step: [delayStep] executed in 1s16ms
2023-07-29 22:52:37.862  INFO >> ==================== 5단계 결과 메일 전송 ====================
2023-07-29 22:52:37.875  INFO >> Executing step: [sendMessageStep]
2023-07-29 22:52:38.380  INFO >> Step: [sendMessageStep] executed in 505ms
2023-07-29 22:52:38.386  INFO >> Executing step: [finishStep]
2023-07-29 22:52:38.388  INFO >> ==================== Step 7. 정산 배치 종료 ====================
2023-07-29 22:52:38.390  INFO >> Step: [finishStep] executed in 3ms
2023-07-29 22:52:38.394  INFO >> Job: [SimpleJob: [name=dailyJob]] completed with the following parameters: [{'random':'{value=1b0949b7-e63a-42bc-986a-6330fe9fd48f, type=class java.lang.String, identifying=true}','chunkSize':'{value=5000, type=class java.lang.String, identifying=true}','mockSize':'{value=100000, type=class java.lang.String, identifying=true}','targetDate':'{value=2023-07-29, type=class java.lang.String, identifying=true}'}] and the following status: [COMPLETED] in 13s919ms
2023-07-29 22:56:54.708  INFO >> Closed connection: SocketSession[id:c28ef592-141f-f743-e87f-c738e63e75bb]
2023-07-29 22:57:00.627  INFO >> Waiting for workers to finish.
2023-07-29 22:57:01.238  INFO >> Successfully waited for workers to finish.
2023-07-29 22:57:01.255  INFO >> Shutdown ignored - container is already stopped
2023-07-29 22:57:01.260  INFO >> Closing JPA EntityManagerFactory for persistence unit 'default'
2023-07-29 22:57:01.264  INFO >> HikariPool-1 - Shutdown initiated...
2023-07-29 22:57:01.269  INFO >> HikariPool-1 - Shutdown completed.
